<!-- HTML header for doxygen 1.8.18-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LuaSTG-x Core API: file Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="/*height: 56px;*/">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname" style="font-size: 150%;">LuaSTG-x Core API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classfile.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfile-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">file Class Reference<div class="ingroups"><a class="el" href="group___lua___builtin.html">Lua_Builtin</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa7d699263d570c9906c69110cdbafc66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfunction.html">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfile.html#aa7d699263d570c9906c69110cdbafc66">close</a> ()</td></tr>
<tr class="separator:aa7d699263d570c9906c69110cdbafc66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab356c6eab1fdd00c1bff4b14f7cd55ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfunction.html">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfile.html#ab356c6eab1fdd00c1bff4b14f7cd55ca">flush</a> ()</td></tr>
<tr class="separator:ab356c6eab1fdd00c1bff4b14f7cd55ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7dbd495f365570f1e212aa78a487dbf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfunction.html">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfile.html#ab7dbd495f365570f1e212aa78a487dbf">lines</a> (<a class="el" href="classlocal.html">local</a> ...)</td></tr>
<tr class="separator:ab7dbd495f365570f1e212aa78a487dbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9747f4fb9836f4d74aca09d21994d602"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfunction.html">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfile.html#a9747f4fb9836f4d74aca09d21994d602">read</a> (<a class="el" href="classlocal.html">local</a> ...)</td></tr>
<tr class="separator:a9747f4fb9836f4d74aca09d21994d602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a99b5bbb65db739a1244ed14c91662f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfunction.html">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfile.html#a4a99b5bbb65db739a1244ed14c91662f">seek</a> (<a class="el" href="classlocal.html">local</a> whence, <a class="el" href="classlocal.html">local</a> offset)</td></tr>
<tr class="separator:a4a99b5bbb65db739a1244ed14c91662f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a734666f46eac0b66bf6f50d55455b5f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfunction.html">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfile.html#a734666f46eac0b66bf6f50d55455b5f9">setvbuf</a> (<a class="el" href="classlocal.html">local</a> mode, <a class="el" href="classlocal.html">local</a> size)</td></tr>
<tr class="separator:a734666f46eac0b66bf6f50d55455b5f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2f1388ff975baa066c40a94148307b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfunction.html">function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfile.html#ad2f1388ff975baa066c40a94148307b1">write</a> (<a class="el" href="classlocal.html">local</a> ...)</td></tr>
<tr class="separator:ad2f1388ff975baa066c40a94148307b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File object </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aa7d699263d570c9906c69110cdbafc66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7d699263d570c9906c69110cdbafc66">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfunction.html">function</a> close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>关闭 <code>file</code>。</p>
<p>注意，文件在句柄被垃圾回收时会自动关闭，</p>
<p>但是多久以后发生，时间不可预期的。</p>
<p>当关闭用 <code><a class="el" href="classio.html#acf012b87caf3430d3fa7158e35dc575b">io.popen</a></code> 创建出来的文件句柄时，</p>
<p><code><a href="file:close">file:close</a></code> 返回与 <code><a class="el" href="classos.html#a3431649a4c6a7e823d4356340e3153bc">os.execute</a></code> 一样的返回值。 </p>

</div>
</div>
<a id="ab356c6eab1fdd00c1bff4b14f7cd55ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab356c6eab1fdd00c1bff4b14f7cd55ca">&#9670;&nbsp;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfunction.html">function</a> flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>将写入的数据保存到 <code>file</code> 中。 </p>

</div>
</div>
<a id="ab7dbd495f365570f1e212aa78a487dbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7dbd495f365570f1e212aa78a487dbf">&#9670;&nbsp;</a></span>lines()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfunction.html">function</a> lines </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlocal.html">local</a> ...&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>返回一个迭代器函数，</p>
<p>每次调用迭代器时，都从文件中按指定格式读数据。</p>
<p>如果没有指定格式，使用默认值 <code>"l"</code> 。</p>
<p>看一个例子</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span> c in <a class="code" href="classfile.html">file</a>:<a class="code" href="classfile.html#ab7dbd495f365570f1e212aa78a487dbf">lines</a>(1) do *body* end</div>
</div><!-- fragment --><p>会从文件当前位置开始，中不断读出字符。</p>
<p>和 <code><a class="el" href="classio.html#ac3197014352a1c0cb0d236f0cb3d533a">io.lines</a></code> 不同，</p>
<p>这个函数在循环结束后不会关闭文件。</p>
<p>在出错的情况下，函数抛出错误而不是返回错误码。</p>
<dl class="section return"><dt>Returns</dt><dd>fun():any </dd></dl>

</div>
</div>
<a id="a9747f4fb9836f4d74aca09d21994d602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9747f4fb9836f4d74aca09d21994d602">&#9670;&nbsp;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfunction.html">function</a> read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlocal.html">local</a> ...&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>读文件 <code>file</code>，</p>
<p>指定的格式决定了要读什么。</p>
<p>对于每种格式，函数返回读出的字符对应的字符串或数字。</p>
<p>若不能以该格式对应读出数据则返回 **nil**。</p>
<p>（对于最后这种情况，函数不会读出后续的格式。）</p>
<p>当调用时不传格式，它会使用默认格式读下一行（见下面描述）。</p>
<p>提供的格式有</p>
<p>**"n"**: 读取一个数字。</p>
<p>（数字可以有前置或后置的空格，以及符号。）</p>
<p>只要能构成合法的数字，这个格式总是去读尽量长的串；</p>
<p>如果读出来的前缀无法构成合法的数字</p>
<p>（比如空串，<code>"0x"</code> 或 <code>"3.4e-"</code>），</p>
<p>就中止函数运行，返回 **nil**。</p>
<p>**"a"**: 从当前位置开始读取整个文件。</p>
<p>如果已在文件末尾，返回空串。</p>
<p>**"l"**: 读取一行并忽略行结束标记。当在文件末尾时，返回 **nil**。</p>
<p>这是默认格式。</p>
<p>**"L"**: 读取一行并保留行结束标记（如果有的话），</p>
<p>当在文件末尾时，返回 **nil**。</p>
<p><em>number</em>: 读取一个不超过这个数量字节数的字符串。</p>
<p>当在文件末尾时，返回 **nil**。</p>
<p>如果 <code>number</code> 为零，</p>
<p>它什么也不读，返回一个空串。</p>
<p>当在文件末尾时，返回 **nil**。</p>
<p>格式 <code>"l"</code> 和 <code>"L"</code> 只能用于文本文件。 </p>

</div>
</div>
<a id="a4a99b5bbb65db739a1244ed14c91662f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a99b5bbb65db739a1244ed14c91662f">&#9670;&nbsp;</a></span>seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfunction.html">function</a> seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlocal.html">local</a>&#160;</td>
          <td class="paramname"><em>whence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlocal.html">local</a>&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>设置及获取基于文件开头处计算出的位置。</p>
<p>设置的位置由 <code>offset</code> 和</p>
<p><code>whence</code> 字符串 <code>whence</code></p>
<p>指定的基点决定。基点可以是：</p>
<p>**"set"**: 基点为 0 （文件开头）；</p>
<p>**"cur"**: 基点为当前位置；</p>
<p>**"end"**: 基点为文件尾；</p>
<p>当 <code>seek</code> 成功时，返回最终从文件开头计算起的文件的位置。</p>
<p>当 <code>seek</code> 失败时，返回 <b>nil</b> 加上一个错误描述字符串。</p>
<p><code>whence</code> 的默认值是 <code>"cur"</code>，</p>
<p><code>offset</code> 默认为 0 。</p>
<p>因此，调用 <code><a href="file:seek()">file:seek()</a></code> 可以返回文件当前位置，并不改变它；</p>
<p>调用 <code><a href="file:seek">file:seek</a>("set")</code> 将位置设为文件开头（并返回 0）；</p>
<p>调用 <code><a href="file:seek">file:seek</a>("end")</code> 将位置设到文件末尾，并返回文件大小。</p>
<dl class="section user"><dt>重载</dt><dd>fun()</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">whence</td><td>string</td></tr>
    <tr><td class="paramname">offset</td><td>number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a734666f46eac0b66bf6f50d55455b5f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a734666f46eac0b66bf6f50d55455b5f9">&#9670;&nbsp;</a></span>setvbuf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfunction.html">function</a> setvbuf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlocal.html">local</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlocal.html">local</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>设置输出文件的缓冲模式。</p>
<p>有三种模式：</p>
<p>**"no"**: 不缓冲；输出操作立刻生效。</p>
<p>**"full"**: 完全缓冲；只有在缓存满或当你显式的对文件调用</p>
<p><code>flush</code>（参见 <code><a class="el" href="classio.html#a414e7b0ab45e2a909edffae8fd3b279d">io.flush</a></code>）时才真正做输出操作。</p>
<p>**"line"**: 行缓冲；输出将缓冲到每次换行前，</p>
<p>对于某些特殊文件（例如终端设备）缓冲到任何输入前。</p>
<p>对于后两种情况，<code>size</code> 以字节数为单位指定缓冲区大小。</p>
<p>默认会有一个恰当的大小。</p>
<dl class="section user"><dt>重载</dt><dd>fun(mode:string)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>string</td></tr>
    <tr><td class="paramname">size</td><td>number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad2f1388ff975baa066c40a94148307b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2f1388ff975baa066c40a94148307b1">&#9670;&nbsp;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfunction.html">function</a> write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlocal.html">local</a> ...&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>将参数的值逐个写入 <code>file</code>。</p>
<p>参数必须是字符串或数字。</p>
<p>成功时，函数返回 <code>file</code>。</p>
<p>否则返回 <b>nil</b> 加错误描述字符串。 </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>luajit/<a class="el" href="luajit_2io_8lua_8hpp.html">io.lua.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclassfile_html"><div class="ttname"><a href="classfile.html">file</a></div><div class="ttdef"><b>Definition:</b> io.lua.hpp:266</div></div>
<div class="ttc" id="aclassfile_html_ab7dbd495f365570f1e212aa78a487dbf"><div class="ttname"><a href="classfile.html#ab7dbd495f365570f1e212aa78a487dbf">file::lines</a></div><div class="ttdeci">function lines(local ...)</div><div class="ttdef"><b>Definition:</b> io.lua.hpp:323</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classfile.html">file</a></li>
    <li class="footer">Generated on Tue Jul 21 2020 18:28:39 for LuaSTG-x Core API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
